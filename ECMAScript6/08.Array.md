# æ•°ç»„çš„æ‰©å±•

## 1.æ‰©å±•è¿ç®—ç¬¦

### å«ä¹‰

æ‰©å±•è¿ç®—ç¬¦(spread)æ˜¯ä¸‰ä¸ªç‚¹(`...`), å¥½æ¯” rest å‚æ•°çš„é€†è¿ç®—, å°†ä¸€ä¸ªæ•°ç»„è½¬ä¸ºç”¨é€—å·åˆ†å‰²çš„å‚æ•°åºåˆ—. å¦‚æžœæ‰©å±•è¿ç®—ç¬¦åŽé¢æ˜¯ä¸€ä¸ªç©ºæ•°ç»„, åˆ™ä¸äº§ç”Ÿä»»ä½•æ•ˆæžœ.

```js
console.log(...[1, 2, 3]) // 1 2 3

[...[], 1] // [1]
```

æ³¨æ„: åªæœ‰å‡½æ•°è°ƒç”¨æ—¶, æ‰©å±•è¿ç®—ç¬¦æ‰å¯ä»¥æ”¾åœ¨åœ†æ‹¬å·ä¸­, å¦åˆ™ä¼šæŠ¥é”™

```js
(...[1, 2])
// Uncaught SyntaxError: Unexpected number

console.log((...[1, 2]))
// Uncaught SyntaxError: Unexpected number

console.log(...[1, 2])
// 1 2
```

### æ›¿ä»£å‡½æ•° apply æ–¹æ³•

æ‰©å±•è¿ç®—ç¬¦å¯ä»¥å±•å¼€æ•°ç»„, æ‰€ä»¥ä¸éœ€è¦`apply`æ–¹æ³•å°†æ•°ç»„è½¬ä¸ºå‡½æ•°çš„å‚æ•°äº†.

```js
function f(x, y, z) {
  console.log(x, y, z);
}

const args = [1, 2, 3];

// ES5
f.apply(null, args); // 1 2 3
// ES6
f(...args); // 1 2 3
```

### æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨

1. å…‹éš†æ•°ç»„(æµ…æ‹·è´)

```js
const a1 = [1, 2];

// å†™æ³•ä¸€
const a2 = [...a1];
// å†™æ³•äºŒ
const [...a3] = a1;
```

2. åˆå¹¶æ•°ç»„

```js
const arr1 = [1, 2];
const arr2 = [3];

// ES5
arr1.concat(arr2);

// ES6
const arr3 = [...arr1, ...arr2];
```

3. ä¸Žè§£æž„èµ‹å€¼ç»“åˆç”Ÿæˆæ•°ç»„

æ‰©å±•è¿ç®—ç¬¦å¯ä»¥ä¸Žè§£æž„èµ‹å€¼ç»“åˆèµ·æ¥ç”¨äºŽç”Ÿæˆæ•°ç»„

```js
const [first, ...rest] = [1, 2, 3];
first; // 1
rest; // [2, 3]
```

æ‰©å±•è¿ç®—ç¬¦åªèƒ½æ”¾åœ¨æ•°ç»„æœ€åŽä¸€ä½, å¦åˆ™ä¼šæŠ¥é”™

```js
// const [first, ...middle, last] = [1, 2, 3, 4];
// Uncaught SyntaxError: Rest element must be last element
```

4. å­—ç¬¦ä¸²

æ‰©å±•è¿ç®—ç¬¦è¿˜å¯ä»¥å°†å­—ç¬¦ä¸²è½¬ä¸ºçœŸæ­£çš„æ•°ç»„, å¹¶ä¸”èƒ½æ­£ç¡®è¯†åˆ«å››å­—èŠ‚çš„ Unicode å­—ç¬¦.

```js
[..."hello"]; // ["h", "e", "l", "l", "o"]

["x\ud83d\ude80y"]; // ["x", "ðŸš€", "y"]
"x\ud83d\ude80y".length; // 4
["x\ud83d\ude80y"].length; // 3
```

5. å®žçŽ°äº† Iterator æŽ¥å£çš„å¯¹è±¡

ä»»ä½•å®šä¹‰äº†éåŽ†å™¨(`Iterator`)æŽ¥å£çš„å¯¹è±¡éƒ½å¯ä»¥ç”¨æ‰©å±•è¿ç®—ç¬¦è½¬ä¸ºçœŸæ­£çš„æ•°ç»„, æ¯”å¦‚`document.querySelectorAll`è¿”å›žçš„`NodeList`å¯¹è±¡, `arguments`å¯¹è±¡ç­‰.

```js
const nodeList = document.querySelectorAll("div");
const array = [...nodeList];

function fn() {
  return [...arguments];
}
```

6. Map å’Œ Set ç»“æž„, Generator å‡½æ•°

æ‰©å±•è¿ç®—ç¬¦å†…éƒ¨è°ƒç”¨æ•°æ®ç»“æž„çš„ Iterator æŽ¥å£ ,åªè¦å…·æœ‰éåŽ†å™¨(`Iterator`)æŽ¥å£çš„å¯¹è±¡, éƒ½å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦. æ¯”å¦‚`Map`ç»“æž„:

```js
const map = new Map([
  [1, "one"],
  [2, "two"],
  [3, "three"],
]);

const arr = [...map.keys()]; // [ 1, 2, 3 ]
```

`Generator`å‡½æ•°è¿è¡ŒåŽ, è¿”å›žä¸€ä¸ªéåŽ†å™¨å¯¹è±¡:

```js
const go = function* () {
  yield 1;
  yield 2;
  yield 3;
};

[...go()]; // [ 1, 2, 3 ]
```

ä¸å…·æœ‰ Iterator æŽ¥å£çš„å¯¹è±¡ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ä¼šæŠ¥é”™:

```js
const obj = { a: "1", b: "2" };

const arr = [...obj]; // TypeError: object is not iterable (cannot read property Symbol(Symbol.iterator))
```

## 2.Array.from()

`Array.from()`æ–¹æ³•å°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„: 1.ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡(array-like-object), 2.å¯éåŽ†(iterable)å¯¹è±¡.

å°†ç±»æ•°ç»„å¯¹è±¡è½¬ä¸ºæ•°ç»„:

```js
const arrayLike = {
  0: "a",
  1: "b",
  2: "c",
  length: 3,
};
// ES5
var arr1 = [].slice.call(arrayLike);
// ES6
const arr2 = Array.from(arrayLike);
```

æ—¥å¸¸å¼€å‘ä¸­æœ‰ DOM æ“ä½œè¿”å›žçš„ NodeList é›†åˆ, å‡½æ•°å†…éƒ¨çš„ arguments å¯¹è±¡ç­‰, å¯ä»¥ä½¿ç”¨`Array.from()`å°†ä»–ä»¬è½¬ä¸ºçœŸæ­£çš„æ•°ç»„.

```js
const nodeList = document.querySelectorAll("div");
const array = Array.from(nodeList);

function fn() {
  return Array.from(arguments);
}
```

åªè¦éƒ¨ç½²äº† Iterator æŽ¥å£çš„æ•°æ®ç»“æž„, `Array.from()`å°±èƒ½å°†å…¶è½¬ä¸ºæ•°ç»„. å¦‚æžœå‚æ•°æ—¶ä¸€ä¸ªæ•°ç»„, é‚£ä¼šè¿”å›žä¸€ä¸ªä¸€æ‘¸ä¸€æ ·çš„æ•°ç»„.

```js
const str = "hello";
Array.from(str); // [ 'h', 'e', 'l', 'l', 'o' ]

const nameSet = new Set(["a", "b"]);
Array.from(nameSet); // [ 'a', 'b' ]

Array.from([1, 2, 3]); // [1, 2, 3]
```

æ‰©å±•è¿ç®—ç¬¦ä¸Ž`Array.from()`ç±»ä¼¼, æ‰©å±•è¿ç®—ç¬¦è°ƒç”¨çš„æ˜¯éåŽ†å™¨æŽ¥å£(`Symbol.Iterator`), å¦‚æžœä¸€ä¸ªå¯¹è±¡æ²¡æœ‰è¿™ä¸ªæŽ¥å£å°±æ— æ³•è½¬æ¢. è€Œ`Array.from()`æ–¹æ³•è¿˜æ”¯æŒç±»æ•°ç»„å¯¹è±¡(æœ¬è´¨æ˜¯å¿…é¡»æœ‰`length`å±žæ€§), ä»»ä½•æœ‰`length`å±žæ€§çš„å¯¹è±¡éƒ½å¯ä»¥é€šè¿‡`Array.from()`æ–¹æ³•è½¬ä¸ºæ•°ç»„.

```js
Array.from({ length: 3 }); // [ undefined, undefined, undefined ]
[...{ length: 3 }];
```

`Array.from()`å¯ä»¥æŽ¥å£ç¬¬äºŒä¸ªå‚æ•°, ä½œç”¨ç±»ä¼¼äºŽ`map`æ–¹æ³•, ç”¨æ¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†, å°†å¤„ç†åŽçš„å€¼æ”¾å…¥è¿”å›žçš„æ•°ç»„.

```js
Array.from([1, 2, 3], (x) => x * x); // [1, 4, 9]
```

`Array.from()`çš„ä¸€ä¸ªåº”ç”¨åœºæ™¯èŽ·å–å­—ç¬¦ä¸²çš„çœŸå®žé•¿åº¦, å¯ä»¥æ­£ç¡®å¤„ç†å„ç§ Unicode å­—ç¬¦:

```js
function conuntSymbols(string) {
  return Array.from(string).length;
}
```

## 3.Array.of()

`Array.of()`æ–¹æ³•ç”¨äºŽå°†ä¸€ç»„æ•°å€¼, è½¬ä¸ºæ•°ç»„. è¿™ä¸ªæ–¹æ³•ä¸»è¦ç›®çš„æ˜¯å¼¥è¡¥æ•°ç»„æž„é€ å‡½æ•°`Array()`çš„ä¸è¶³. å› ä¸ºå‚æ•°ä¸ªæ•°ä¼šå¯¼è‡´æž„é€ å‡½æ•°çš„è¡Œä¸ºæœ‰å·®å¼‚.

```js
Array.of(); // []
Array.of(3); // [3]
Array.of(1, 2, 3); // [1, 2, 3]

Array(); // []
Array(3); // [empty Ã— 3]
Array(1, 2, 3); // [1, 2, 3]
```

`Array()`æ–¹æ³•åœ¨æ²¡æœ‰å‚æ•°, ä¸€ä¸ªå‚æ•°, ä¸¤ä¸ªä»¥ä¸Šå‚æ•°æ—¶è¿”å›žç»“æžœä¸ä¸€æ ·. å‚æ•°åªæœ‰ä¸€ä¸ªæ­£æ•´æ•°æ—¶è¿”å›žçš„æ˜¯æŒ‡å®šé•¿åº¦çš„æ•°ç»„; å‚æ•°ä¸¤ä¸ªä»¥ä¸Šæ—¶, è¿”å›žç”±å‚æ•°ç»„æˆçš„æ–°æ•°ç»„.

`Array.of()`å¯ä»¥ç”¨æ¥æ›¿ä»£`Array()`æˆ–è€…`new Array()`ç”ŸæˆæŒ‡å®šå‚æ•°ç»„æˆçš„æ•°ç»„. ä»–æ€»æ˜¯è¿”å›žå‚æ•°ç»„æˆçš„æ•°ç»„, å¦‚æžœæ²¡æœ‰å‚æ•°å°±è¿”å›žä¸€ä¸ªç©ºæ•°ç»„.

## 4.å®žä¾‹æ–¹æ³•:copyWithin()

æ•°ç»„å®žä¾‹çš„`copyWithin()`æ–¹æ³•åœ¨å½“å‰æ•°ç»„å†…éƒ¨, å°†æŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®, ç„¶åŽè¿”å½“å‰æ•°ç»„.(æ³¨æ„ä¼šä¿®æ”¹åŽŸæ•°ç»„)

```js
`Array.prototype.copyWithin(target, start = 0, end = this.length)`;
```

- target: ä»Žè¯¥ä½ç½®å¼€å§‹æ›¿æ¢, å¦‚æžœä¸ºè´Ÿå€¼è¡¨ç¤ºå€’æ•°.
- start: ä»Žè¯¥ä½ç½®å¼€å§‹è¯»å–æ•°æ®, é»˜è®¤ä¸º 0. å¦‚æžœä¸ºè´Ÿå€¼è¡¨ç¤ºä»Žæœ«å°¾å¼€å§‹è®¡ç®—.
- end: åˆ°è¯¥ä½ç½®å‰åœæ­¢è¯»å–æ•°æ®, é»˜è®¤ç­‰äºŽæ•°ç»„é•¿åº¦. å¦‚æžœä¸ºè´Ÿå€¼, è¡¨ç¤ºä»Žæœ«å°¾å¼€å§‹è®¡ç®—.

```js
// å‚æ•°ä¸ºå­—ç¬¦ä¸²ä¼šè‡ªåŠ¨è½¬ä¸ºæ•°å€¼
[1, 2, 3, 4, 5].copyWithin("0", "3", "4"); // [ 4, 2, 3, 4, 5 ]

// å°†3å·ä½ç½®å¤åˆ¶åˆ°0å·
[1, 2, 3, 4, 5].copyWithin(0, 3, 4); // [ 4, 2, 3, 4, 5 ]

// -2ç›¸å½“äºŽ3 -1ç›¸å½“äºŽ4
[1, 2, 3, 4, 5].copyWithin(0, -2, -1); // [ 4, 2, 3, 4, 5 ]
```

## 5.å®žä¾‹æ–¹æ³•:find()å’Œ findIndex()

æ•°ç»„å®žä¾‹çš„`find`æ–¹æ³•ç”¨äºŽæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜, å‚æ•°ä¸ºå›žè°ƒå‡½æ•°, è¿”å›žç¬¬ä¸€ä¸ªæ‰§è¡Œè¯¥å‡½æ•°çš„ç»“æžœè¿”å›ž`true`çš„æˆå‘˜, å¦‚æžœæ²¡æœ‰è¿”å›ž`undefined`. `findIndex`æ–¹æ³•æ˜¯è¿”å›žä¸‹æ ‡, å¦‚æžœæ²¡æœ‰è¿”å›ž`-1`.

```js
[1, 4, -5, 10].find((n) => n < 0); // -5
[1, 4, -5, 10].findIndex((n) => n < 0); // 2
```

è¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥æŽ¥å—ç¬¬äºŒä¸ªå‚æ•°, ç”¨æ¥ç»‘å®šå›žè°ƒå‡½æ•°çš„`this`å¯¹è±¡.

```js
function f(v) {
  return v > this.age;
}
const person = { name: "John", age: 20 };
[10, 12, 25, 16].find(f, person); // 25
```

è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥å‘çŽ°`NaN`, å¼¥è¡¥äº†æ•°ç»„çš„`indexOf`æ–¹æ³•çš„ä¸è¶³.

```js
[NaN].indexOf(NaN); // -1

[NaN].findIndex((item) => Object.is(NaN, item)); // 0
```

## 6.å®žä¾‹æ–¹æ³•:fill()

`Array.prototype.fill(value[, start[, end]])`

`fill`æ–¹æ³•ä½¿ç”¨ç»™å®šå€¼, å¡«å……ä¸€ä¸ªæ•°ç»„:

```js
["a", "b", "c"].fill(7); // [7, 7, 7]

new Array(3).fill(6); // [6, 6, 6]
```

`fill`æ–¹æ³•å¯ä»¥æŽ¥å—ç¬¬äºŒç¬¬ä¸‰ä¸ªå‚æ•°, ç”¨äºŽæŒ‡å®šå¡«å……çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®.

```js
["a", "b", "c"].fill(7, 1, 2); // ["a", 7, "c"]
```

## 7.å®žä¾‹æ–¹æ³•:entries(), keys(), values()

ES6 æä¾›ä¸‰ä¸ªæ–°æ–¹æ³•éåŽ†æ•°ç»„: `entries()` `keys()` `values()`. è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½è¿”å›žä¸€ä¸ªéåŽ†å™¨å¯¹è±¡, å¯ä»¥ä½¿ç”¨`for...of`éåŽ†. åŒºåˆ«åœ¨äºŽ`keys()`æ˜¯å¯¹é”®åçš„éåŽ†, `values()`æ˜¯å¯¹é”®å€¼çš„éåŽ†, `entries()`æ˜¯å¯¹é”®å€¼å¯¹çš„éåŽ†.

```js
for (let index of ["a", "b"].keys()) {
  console.log(index);
}
// 0
// 1

for (let elem of ["a", "b"].values()) {
  console.log(elem);
}
// 'a'
// 'b'

for (let [index, elem] of ["a", "b"].entries()) {
  console.log(index, elem);
}
// 0 'a'
// 1 'b'
```

å¦‚æžœä¸ä½¿ç”¨`for...of`å¾ªçŽ¯, å¯ä»¥æ‰‹åŠ¨è°ƒç”¨éåŽ†å™¨å¯¹è±¡çš„`next`æ–¹æ³•è¿›è¡ŒéåŽ†:

```js
const arr = ["a", "b", "c"];
const entries = arr.entries();

console.log(entries.next().value); // [0, "a"]
console.log(entries.next().value); // [1, "b"]
console.log(entries.next().value); //Â [2, "c"]
```

## 8.å®žä¾‹æ–¹æ³•:includes()

`Array.prototype.includes(valuetoFind[, fromIndex])`è¿”å›žä¸€ä¸ªå¸ƒå°”å€¼, è¡¨ç¤ºæ•°ç»„æ˜¯å¦åŒ…å«æŸä¸ªç»™å®šçš„å€¼, ä¸Žå­—ç¬¦ä¸²çš„`includes`æ–¹æ³•ç±»ä¼¼. ES2016 å¼•å…¥äº†è¯¥æ–¹æ³•.

```js
[1, 2, 3].includes(2); // true
[1, 2, 3].includes(4); // false
[1, 2, 3, NaN].includes(NaN); // true
```

ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæœç´¢çš„èµ·å§‹ä½ç½®, é»˜è®¤ä¸º 0, å¦‚æžœå‚æ•°ä¸ºè´Ÿæ•°è¡¨ç¤ºå€’æ•°ä½ç½®. å¦‚æžœå¦‚æžœå¤§äºŽæ•°ç»„é•¿åº¦, åˆ™ä¼šé‡ç½®ä¸º 0 å¼€å§‹.

```js
[1, 2, 3].includes(3, 3); // false
[1, 2, 3].includes(3, -1); // true
```

`indexOf`ä¸Ž`includes`ç›¸æ¯”æœ‰ä¸¤ä¸ªç¼ºç‚¹, ä¸€ä¸ªæ˜¯ä¸å¤Ÿè¯­ä¹‰åŒ–, äºŒæ˜¯å†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦(`===`)è¿›è¡Œåˆ¤æ–­, ä¼šå¯¼è‡´`NaN`çš„è¯¯åˆ¤.

```js
[NaN].indexOf(NaN); // -1

[NaN].includes(NaN); // true
```

Map å’Œ Set æ•°æ®ç»“æž„æœ‰ä¸€ä¸ª`has`æ–¹æ³•, éœ€è¦ä¸Ž`includes`åŒºåˆ†.

- Map ç»“æž„çš„`has`æ–¹æ³•æ˜¯ç”¨æ¥æŸ¥æ‰¾é”®åçš„, æ¯”å¦‚`Map.prototype.has(key)` `WeakMap.prototype.has(key)` `Reflect.has(target, propertyKey)`
- Set ç»“æž„çš„`has`æ–¹æ³•æ˜¯ç”¨æ¥æŸ¥æ‰¾é”®å€¼çš„, æ¯”å¦‚`Set.prototype.has(value)` `Set.prototype.has(value)`

## 9.å®žä¾‹æ–¹æ³•: flat() flatMap()

`Array.prototype.flat([depth])`å¯ä»¥å°†æ•°ç»„ä¸­çš„æ•°ç»„å…ƒç´ æ‹‰å¹³, è¿”å›žä¸€ä¸ªæ–°æ•°ç»„.

```js
[1, 2, [3, 4]].flat(); // [1, 2, 3, 4]
[1, 2, [3, [4]]].flat(); // [1, 2, 3, Array(1)]
[1, 2, [3, [4]]].flat(2); // [1, 2, 3, 4]
[1, [2, [3, [4]]]].flat(Infinity); // [1, 2, 3, 4]
```

å¦‚æžœåŽŸæ•°ç»„æœ‰ç©ºä½, `flag()`æ–¹æ³•ä¼šè·³è¿‡ç©ºä½.

```js
[1, undefined, null, , 2].flat(); // [1, undefined, null, 2]
```

`Array.prototype.flatMap(function callback(currentValue[, index[, array]]){ }, thisArg)`å¯¹åŽŸæ•°ç»„çš„æ¯ä¸ªæˆå‘˜æ‰§è¡Œä¸€ä¸ªå‡½æ•°(ç›¸å½“äºŽæ‰§è¡Œ`map`), ç„¶åŽè¿”å›žå€¼ç»„æˆçš„æ•°ç»„æ‰§è¡Œ`flag()`æ–¹æ³•. è¯¥æ–¹æ³•è¿”å›žä¸€ä¸ªæ–°æ•°ç»„, ä¸æ”¹å˜æ•°ç»„.

## 10.å®žä¾‹æ–¹æ³•: at()

æ–¹æ‹¬å·è¿ç®—ç¬¦`[]`åœ¨ JavaScript ä¸­ä¸ä»…ç”¨äºŽæ•°ç»„, è¿˜ç”¨äºŽå¯¹è±¡, å¯¹äºŽå¯¹è±¡æ¥è¯´æ–¹æ‹¬å·é‡Œé¢å°±æ˜¯é”®å. æ•°ç»„æ ‘ç‰¹æ®Šçš„å¯¹è±¡, æ–¹æ‹¬å·é‡Œé¢çš„è´Ÿæ•°æ²¡æœ‰å…¶ä»–è¯­ä¹‰, å› æ­¤ä¸å¯èƒ½æ·»åŠ æ–°è¯­æ³•æ¥æ”¯æŒè´Ÿç´¢å¼•.

ä¸€ä¸ªæ–°ææ¡ˆä¸ºæ•°ç»„å®žä¾‹æ·»åŠ äº†`at()`æ–¹æ³•, æŽ¥å—ä¸€ä¸ªæ•´æ•°ä½œä¸ºå‚æ•°, è¿”å›žå¯¹åº”ä½ç½®çš„æˆå‘˜, æ”¯æŒè´Ÿç´¢å¼•. è¿™ä¸ªæ–¹æ³•ä¸ä»…å¯ä»¥ç”¨äºŽæ•°ç»„, ä¹Ÿå¯ä»¥ç”¨äºŽå­—ç¬¦ä¸²å’Œç±»åž‹æ•°ç»„(TypeArray). å¦‚æžœå‚æ•°ä½ç½®è¶…å‡ºäº†æ•°ç»„èŒƒå›´, `at()`è¿”å›ž`undefined`.

```js
const arr = [5, 12, 8, 130, 44];
arr.at(2); // 8
arr.at(-2); // 130
```

## 11.æ•°ç»„çš„ç©ºä½

æ•°ç»„çš„ç©ºä½æŒ‡, æ•°ç»„çš„æŸä¸€ä¸ªä½ç½®æ²¡æœ‰ä»»ä½•å€¼, æ¯”å¦‚`Array()`æž„é€ å‡½æ•°è¿”å›žçš„æ•°ç»„éƒ½æ˜¯ç©ºä½.

```js
Array(3); // [empty Ã— 3]
new Array(3); // [empty Ã— 3]
[null, , undefined]; // [null, empty, undefined]
```

ES5 å¯¹ç©ºä½çš„å¤„ç†, å¤§å¤šæ•°æƒ…å†µéƒ½æ˜¯ä¼šå¿½ç•¥ç©ºä½çš„.

- `forEach()` `filter()` `reduce()` `every()` `some()`éƒ½ä¼šè·³è¿‡ç©ºä½
- `map()`ä¼šè·³è¿‡ç©ºä½, ä½†ä¼šä¿ç•™è¿™ä¸ªå€¼
- `join()`å’Œ`toString()`ä¼šå°†ç©ºä½è§†ä¸º`undefined`, è€Œ`undefined`å’Œ`null`ä¼šè¢«å¤„ç†æˆç©ºå­—ç¬¦ä¸²

```js
[, "a"].forEach((x, i) => console.log(i)); // 1

["a", , "b"].filter((x) => true); // [ 'a', 'b' ]

[, "a"].every((x) => x === "a"); // true

[1, , 2].reduce((x, y) => x + y); // 3

[, "a"].some((x) => x !== "a"); // false

[, "a"].map((x) => 1); // [,1]

[, "a", undefined, null].join("#"); // "#a##"

[, "a", undefined, null].toString(); // ",a,,"
```

ES6 åˆ™æ˜Žç¡®å°†ç©ºä½è½¬ä¸º`undefined`:

`Array.from()`æ–¹æ³•ä¼šå°†æ•°ç»„çš„ç©ºä½è½¬ä¸º`undefined`:

```js
Array.from(["a", , "b"]); // [ "a", undefined, "b" ]
```

æ‰©å±•è¿ç®—ç¬¦(`...`)ä¹Ÿä¼šå°†ç©ºä½è½¬ä¸º`undefined`:

```js
[...["a", , "b"]]; // [ "a", undefined, "b" ]
```

`copyWithin()`ä¼šå°†ç©ºä½ä¸€èµ·æ‹·è´:

```js
[, "a", "b", ,].copyWithin(2, 0); //Â [empty, 'a', empty, 'a']
```

`fill()`ä¼šå°†ç©ºä½è§†ä¸ºæ­£å¸¸æ•°ç»„ä½ç½®:

```js
new Array(3).fill("a"); // ["a","a","a"]
```

`for...of`ä¹Ÿä¼šéåŽ†ç©ºä½:

```js
let arr = [, ,];
for (let i of arr) {
  console.log(1);
}
// 1
// 1
```

`entries()` `keys()` `values()` `find()` `findIndex()`ä¼šå°†ç©ºä½å¤„ç†æˆ`undefined`

```js
[...[, "a"].entries()]; // [[0,undefined], [1,"a"]]

[...[, "a"].keys()]; // [0,1]

[...[, "a"].values()]; // [undefined,"a"]

[, "a"].find((x) => true); // undefined

[, "a"].findIndex((x) => true); // 0
```

ç”±äºŽç©ºä½çš„å¤„ç†è§„åˆ™éžå¸¸ä¸ç»Ÿä¸€, æ‰€ä»¥å»ºè®®é¿å…å‡ºçŽ°ç©ºä½.

## 12.Array.prototype.sort()çš„æŽ’åºç¨³å®šæ€§

æŽ’åºç¨³å®šæ€§æ˜¯æŽ’åºç®—æ³•çš„é‡è¦å±žæ€§, æŒ‡çš„æ˜¯æŽ’åºå…³é”®å­—ç›¸åŒçš„é¡¹ç›®, æŽ’åºå‰åŽçš„é¡ºåºä¸å˜.

```js
const arr = ["peach", "straw", "apple", "spork"];

const stableSorting = (s1, s2) => {
  if (s1[0] < s2[0]) return -1;
  return 1;
};

arr.sort(stableSorting);
// ["apple", "peach", "straw", "spork"]
```

ä¸Šé¢ä»£ç å¯¹æ•°ç»„æ ¹æ®é¦–å­—æ¯è¿›è¡ŒæŽ’åº, æŽ’åºç»“æžœä¸­`straw`åœ¨`spork`å‰é¢, è·ŸåŽŸæ•°ç»„é¡ºåºä¸€è‡´, æ‰€ä»¥`stableSorting`æ˜¯ç¨³å®šæŽ’åº.

```js
const unstableSorting = (s1, s2) => {
  if (s1[0] <= s2[0]) return -1;
  return 1;
};

arr.sort(unstableSorting);
// ["apple", "peach", "spork", "straw"]
```

ä¸Šé¢ä»£ç çš„ç»“æžœä¸­`spork`åœ¨`straw`å‰é¢, è·ŸåŽŸæ•°ç»„é¡ºåºä¸ä¸€è‡´, æ‰€ä»¥`unstableSorting`æ˜¯ä¸ç¨³å®šæŽ’åº.

å¸¸è§çš„æŽ’åºç®—æ³•ä¸­, æ’å…¥æŽ’åº åˆå¹¶æŽ’åº å†’æ³¡æŽ’åºæ˜¯ç¨³å®šçš„, å †æŽ’åº å¿«é€ŸæŽ’åºæ˜¯ä¸ç¨³å®šçš„. ä¸ç¨³å®šæŽ’åºç¼ºç‚¹ä¸»è¦æ˜¯å¤šé‡æŽ’åºæ—¶å¯èƒ½ä¼šäº§ç”Ÿé—®é¢˜.

æ—©å…ˆçš„ ECMAScript æ²¡æœ‰è§„å®š`Array.prototype.sort()`çš„é»˜è®¤æŽ’åºç®—æ³•æ˜¯å¦ç¨³å®š, å¯¼è‡´æµè§ˆå™¨æŸäº›å®žçŽ°æ˜¯ä¸ç¨³å®šçš„. ES2019 æ˜Žç¡®è§„å®š, `Array.prototype.sort()`çš„é»˜è®¤æŽ’åºç®—æ³•å¿…é¡»æ˜¯ç¨³å®šçš„.

# 执行上下文和执行栈

执行上下文是当前 JavaScript 代码被解析和执行时所在环境的抽象概念。

## 执行上下文的类型

- 全局执行上下文
- 函数执行上下文
- eval函数执行上下文

## 执行栈

## 执行上下文的创建

分为两个阶段：1.创建阶段 2.执行阶段

### 创建阶段

1. `This binding` 确定this的值
2. `LexicalEnvironment（词法环境）` 组件被创建
3. `VariableEnvironment（变量环境）` 组件被创建

#### This binding

- 全局上下文this指向全局对象
- 函数上下文this指向取决于函数的调用方式。具体有：默认绑定、隐式绑定、显式绑定（硬绑定）、new绑定、箭头函数。

`变量提升`的原因：在创建阶段，函数声明存储在环境中，而变量会被设置为 undefined（在 var 的情况下）或保持未初始化（在 let 和 const 的情况下）。所以这就是为什么可以在声明之前访问 var 定义的变量（尽管是 undefined ），但如果在声明之前访问 let 和 const 定义的变量就会提示引用错误的原因。这就是所谓的变量提升。
